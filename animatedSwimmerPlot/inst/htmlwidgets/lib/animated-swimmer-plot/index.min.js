!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i(require("core-js/modules/es.object.assign.js"),require("core-js/modules/es.function.bind.js"),require("core-js/modules/es.array.join.js"),require("core-js/modules/es.array.concat.js"),require("core-js/modules/es.regexp.exec.js"),require("core-js/modules/es.string.split.js"),require("core-js/modules/es.array.map.js"),require("core-js/modules/es.array.filter.js"),require("core-js/modules/es.array.for-each.js"),require("core-js/modules/web.dom-collections.for-each.js"),require("core-js/modules/es.array.flat-map.js"),require("core-js/modules/es.array.unscopables.flat-map.js"),require("core-js/modules/es.array.find.js"),require("core-js/modules/es.array.iterator.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/es.promise.js"),require("core-js/modules/es.string.iterator.js"),require("core-js/modules/web.dom-collections.iterator.js"),require("core-js/modules/es.set.js"),require("core-js/modules/es.array.sort.js"),require("core-js/modules/es.array.reverse.js"),require("core-js/modules/es.parse-float.js"),require("core-js/modules/es.object.keys.js"),require("core-js/modules/es.string.replace.js"),require("core-js/modules/es.array.includes.js")):"function"==typeof define&&define.amd?define(["core-js/modules/es.object.assign.js","core-js/modules/es.function.bind.js","core-js/modules/es.array.join.js","core-js/modules/es.array.concat.js","core-js/modules/es.regexp.exec.js","core-js/modules/es.string.split.js","core-js/modules/es.array.map.js","core-js/modules/es.array.filter.js","core-js/modules/es.array.for-each.js","core-js/modules/web.dom-collections.for-each.js","core-js/modules/es.array.flat-map.js","core-js/modules/es.array.unscopables.flat-map.js","core-js/modules/es.array.find.js","core-js/modules/es.array.iterator.js","core-js/modules/es.object.to-string.js","core-js/modules/es.promise.js","core-js/modules/es.string.iterator.js","core-js/modules/web.dom-collections.iterator.js","core-js/modules/es.set.js","core-js/modules/es.array.sort.js","core-js/modules/es.array.reverse.js","core-js/modules/es.parse-float.js","core-js/modules/es.object.keys.js","core-js/modules/es.string.replace.js","core-js/modules/es.array.includes.js"],i):(t="undefined"!=typeof globalThis?globalThis:t||self).animatedSwimmerPlot=i()}(this,(function(){"use strict";function t(t,i,e,n,s,r,a){try{var o=t[r](a),c=o.value}catch(t){return void e(t)}o.done?i(c):Promise.resolve(c).then(n,s)}function i(i){return function(){var e=this,n=arguments;return new Promise((function(s,r){var a=i.apply(e,n);function o(i){t(a,s,r,o,c,"next",i)}function c(i){t(a,s,r,o,c,"throw",i)}o(void 0)}))}}function e(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function n(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i&&(n=n.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,n)}return e}function s(t){for(var i=1;i<arguments.length;i++){var s=null!=arguments[i]?arguments[i]:{};i%2?n(Object(s),!0).forEach((function(i){e(t,i,s[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(s,i))}))}return t}function r(t,i){if(t!==i)throw new TypeError("Cannot instantiate an arrow function")}function a(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==e)return;var n,s,r=[],a=!0,o=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(r.push(n.value),!i||r.length!==i);a=!0);}catch(t){o=!0,s=t}finally{try{a||null==e.return||e.return()}finally{if(o)throw s}}return r}(t,i)||c(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||c(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,i){if(t){if("string"==typeof t)return l(t,i);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?l(t,i):void 0}}function l(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,n=new Array(i);e<i;e++)n[e]=t[e];return n}function u(t,i){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=c(t))||i&&t&&"number"==typeof t.length){e&&(t=e);var n=0,s=function(){};return{s:s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,o=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){o=!0,r=t},f:function(){try{a||null==e.return||e.return()}finally{if(o)throw r}}}}var h={addElement:function(t,i){var e=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"div",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(t,i){return r(this,e),i}.bind(this);return s?i.selectAll("".concat(n,".asp-").concat(t,".asp-").concat(n)).data(s,a).join(n).classed("asp-".concat(t," asp-").concat(n),!0):i.append(n).classed("asp-".concat(t," asp-").concat(n),!0)},addIcon:function(t,i){Math.max(i[0],i[1]);var e=this.settings.buttonSize/Math.max(i[0],i[1]),n=this.settings.buttonSize-i[0]*e,s=this.settings.buttonSize-i[1]*e;return t.append("svg").attr("width","".concat(this.settings.buttonSize,"px")).attr("height","".concat(this.settings.buttonSize,"px")).append("g").append("path").attr("transform","translate(".concat(n/2,",").concat(s/2,") scale(").concat(e,")")).attr("d",i[4])}};function d(t){var i=t.node().clientWidth-20;return{width:i,height:i*screen.height/screen.width*3/4}}
/*!
     * Font Awesome Free 5.15.3 by @fontawesome - https://fontawesome.com
     * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
     */var f={prefix:"fas",iconName:"pause",icon:[448,512,[],"f04c","M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"]},p={prefix:"fas",iconName:"play",icon:[448,512,[],"f04b","M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"]},g=[512,512,[],"f01e","M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"],m=[448,512,[],"f048","M64 468V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12v176.4l195.5-181C352.1 22.3 384 36.6 384 64v384c0 27.4-31.9 41.7-52.5 24.6L136 292.7V468c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12z"],v=[448,512,[],"f051","M384 44v424c0 6.6-5.4 12-12 12h-48c-6.6 0-12-5.4-12-12V291.6l-195.5 181C95.9 489.7 64 475.4 64 448V64c0-27.4 31.9-41.7 52.5-24.6L312 219.3V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12z"];function b(){console.log(this.settings.play?"pause":"play"),this.settings.play=!this.settings.play,this.controls.playPause.attr("title",this.settings.play?"Pause animation":"Play animation"),this.controls.playPause.select("path").attr("d",(this.settings.play?f:p).icon[4])}function y(t){var i=this;return new Set(t.map(function(t){return r(this,i),t.id}.bind(this)))}function x(t){var i=this;return d3.rollups(t.filter(function(t){return r(this,i),!/Unscheduled/.test(t.visit)}.bind(this)),function(t){var e=this;return r(this,i),d3.median(t,function(t){return r(this,e),t.timepoint}.bind(this))}.bind(this),function(t){return r(this,i),t.visit}.bind(this))}function w(t){var i=this,e=o(new Set(t.map(function(t){return r(this,i),"".concat(t.result_order,"|").concat(t.result,"|").concat(t.result_color)}.bind(this))).values()).map(function(t){return r(this,i),[+t.split("|")[0],t.split("|")[1],t.split("|")[2]]}.bind(this)).sort(function(t,e){return r(this,i),a(t,1)[0]-a(e,1)[0]}.bind(this));return{result:e.map(function(t){r(this,i);var e=a(t,3);e[0];var n=e[1];return e[2],n}.bind(this)),result_color:e.map(function(t){r(this,i);var e=a(t,3);return e[0],e[1],e[2]}.bind(this))}}function j(){return s({id:y.call(this,this.data.mutated),visit:x.call(this,this.data.mutated)},w.call(this,this.data.mutated))}function k(t){return d3.scaleLinear().domain([0,1]).range(t)}function _(t){return d3.scaleBand().domain(d3.range(t.size).reverse()).range([this.settings.height-this.settings.margin.bottom,this.settings.margin.top]).padding(this.settings.padding)}function E(){return d3.scaleOrdinal().domain(this.set.result).range(this.set.result_color.length>1?this.set.result_color.concat(d3.schemeTableau10):d3.schemeTableau10)}function S(){return{x:k.call(this,[this.settings.margin.left,this.settings.width-this.settings.margin.right]),y:_.call(this,this.set.id),color:E.call(this)}}function A(){var t=this,i=this.settings.width/this.scale.color.domain().length,e=50,n=this.layout.legend.selectAll("div").data(this.scale.color.domain()).join("div").style("display","inline-block");return n.each((function(n,s){var a=this,o=d3.select(this).append("svg").attr("width","".concat(i,"px")).attr("height","".concat(e,"px"));0===s&&o.append("text").attr("x",0).attr("y",0).attr("alignment-baseline","hanging").attr("fill","black").style("font-weight","bold").style("font-size",12.5).text(t.settings.criteria),o.append("rect").attr("x",0).attr("y",12.5).attr("rx","8px").attr("ry","8px").attr("width",i-4).attr("height",37.5).attr("fill",function(i){return r(this,a),t.scale.color(i)}.bind(this)),o.append("text").attr("x",i/2).attr("y",32.8125).attr("text-anchor","middle").attr("alignment-baseline","middle").attr("fill","white").style("font-weight","bold").style("font-size",e/3).text(function(t){return r(this,a),t}.bind(this))})),{width:i,container:this.layout.legend,swatches:n}}function O(t){var i=this,e=this.util.addElement("canvas",this.layout.plots).classed("asp-canvas--".concat(this.settings.split),!0),n=this.util.addElement("svg",e,"svg").attr("width",t.settings.width).attr("height",this.settings.height);return{canvas:e,svg:n,title:this.util.addElement("g--title",n,"g").attr("transform",function(e){return r(this,i),"translate(".concat(t.settings.translateX,",").concat(t.settings.margin.top/2,")")}.bind(this)).append("text").attr("text-anchor",t.i%2==0?"end":"start").attr("alignment-baseline","middle").attr("x",-5*t.settings.sign).attr("y",5).text(""!==t.stratum?"".concat(t.stratum):null),n:this.util.addElement("g--n",n,"g").attr("transform",function(e){return r(this,i),"translate(".concat(t.settings.translateX,",").concat(this.settings.margin.top/2,")")}.bind(this)).append("text").attr("text-anchor","middle").attr("alignment-baseline","middle").attr("x",t.settings.sign*t.settings.strokeWidth/2).attr("y",5),groups:this.util.addElement("g--groups",n,"g").style("font","bold 12px var(--sans-serif)").style("font-variant-numeric","tabular-nums").attr("stroke-opacity",.6).attr("fill-opacity",1),bars:this.util.addElement("g--bars",n,"g").attr("fill-opacity",.6),xAxisTop:this.util.addElement("g--x-axis",n,"g").attr("transform","translate(0,".concat(this.settings.margin.top,")")),xAxisBottom:this.util.addElement("g--x-axis",n,"g").attr("transform","translate(0,".concat(this.settings.height-this.settings.margin.bottom,")")).call(function(e){return r(this,i),this.util.addElement("x-axis__label",e,"text").attr("x",t.settings.mirror?t.settings.width-t.settings.margin.right-18:t.settings.margin.left+18).attr("y",25).attr("fill","currentColor").attr("text-anchor",t.settings.mirror?"end":"start").attr("alignment-baseline","hanging").text(t.settings.mirror?"← Time (".concat(this.settings.timepointUnit,"s)"):"Time (".concat(this.settings.timepointUnit,"s) →"))}.bind(this)),yAxis:this.util.addElement("g--y-axis",n,"g").attr("transform","translate(".concat(this.settings.margin.left,",0)")),labels:this.util.addElement("g--labels",n,"g").style("font","bold 12px var(--sans-serif)").style("font-variant-numeric","tabular-nums").attr("text-anchor","start")}}function M(t,i){var e=this;return{mutated:t,interpolated:this.data.interpolated.filter(function(t){return r(this,e),t.stratum===i}.bind(this)),timepoints:this.data.timepoints.map(function(t){var n=this;r(this,e);var s=a(t,2),o=s[0],c=s[1].filter(function(t){return r(this,n),t.stratum===i}.bind(this)).sort(function(t,i){return r(this,n),t["rank".concat(this.settings.view)]-i["rank".concat(this.settings.view)]}.bind(this));return c.forEach(function(t,e){r(this,n),t["rank".concat(i)]=e}.bind(this)),[o,c]}.bind(this))}}function L(t,i){var e=this;return d3.rollups(i,function(i){var n=this;return r(this,e),i.sort(function(i,e){return r(this,n),i["rank".concat(t.stratum)]-e["rank".concat(t.stratum)]}.bind(this)),{state:i[0].state,state_order:i[0].state_order,n:i.length,rankMin:i[0]["rank".concat(t.stratum)],rankMax:i[i.length-1]["rank".concat(t.stratum)],pct:d3.format(".0%")(i.length/t.set.id.size)}}.bind(this),function(t){return r(this,e),t.state}.bind(this))}function z(t){var i=this,e=t.layout.groups.selectAll("g");return function(n,s){var o=this;r(this,i);var c=a(n,2);c[0];var l=c[1];return e=e.data(L.call(this,t,l),function(t){return r(this,o),t[0]}.bind(this)).join(function(i){var e=this;return r(this,o),i.append("g").attr("transform",function(i){return r(this,e),"translate(".concat(t.settings.translateX,",").concat(t.scale.y(i[1].rankMin),")")}.bind(this)).call(function(i){var n=this;r(this,e),i.append("line").classed("asp-line asp-line--group",!0).attr("x1",t.settings.sign*t.settings.strokeWidth/2).attr("x2",t.settings.sign*t.settings.strokeWidth/2).attr("y1",0).attr("y2",0).attr("stroke",function(t){return r(this,n),this.scale.color(t[0])}.bind(this)).attr("stroke-width",t.settings.strokeWidth-4),i.append("text").classed("asp-text asp-text--percent",!0).attr("text-anchor","middle").attr("alignment-baseline","middle").attr("x",t.settings.sign*t.settings.strokeWidth/2).attr("y",function(i){return r(this,n),(t.scale.y(i[1].rankMax)-t.scale.y(i[1].rankMin))/2+t.scale.y.bandwidth()/2+1}.bind(this)).text(function(t){return r(this,n),"".concat(t[1].n," (").concat(t[1].pct,")")}.bind(this))}.bind(this))}.bind(this),function(t){return r(this,o),t}.bind(this),function(t){r(this,o),t.select("line.asp-line--group").transition(s).duration(this.settings.duration).attr("y2",0),t.transition(s).duration(this.settings.duration).attr("stroke-opacity",0).attr("fill-opacity",0).remove()}.bind(this)).call(function(i){var e=this;r(this,o),i.transition(s).duration(this.settings.duration).attr("transform",function(i){return r(this,e),"translate(".concat(t.settings.translateX,",").concat(t.scale.y(i[1].rankMin),")")}.bind(this)),i.select("text.asp-text--percent").transition(s).duration(this.settings.duration).attr("y",function(i){return r(this,e),(t.scale.y(i[1].rankMax)-t.scale.y(i[1].rankMin))/2+t.scale.y.bandwidth()/2+1}.bind(this)).style("display",(function(i){var e=window.getComputedStyle(this,null).getPropertyValue("font-size"),n=parseFloat(e);return i[1].n*t.scale.y.bandwidth()>n?null:"none"})).text(function(t){return r(this,e),this.settings.redact_numbers?"n (xx%)":"".concat(t[1].n," (").concat(t[1].pct,")")}.bind(this)),i.select("line.asp-line--group").transition(s).duration(this.settings.duration).attr("y2",function(i){return r(this,e),t.scale.y(i[1].rankMax)-t.scale.y(i[1].rankMin)+t.scale.y.bandwidth()}.bind(this))}.bind(this))}.bind(this)}function P(t){var i=this,e=t.layout.bars.selectAll("g"),n=function(e){return r(this,i),t.settings.mirror?t.scale.x(e.start_timepoint+e.duration):t.scale.x(e.start_timepoint)}.bind(this),s=function(e){return r(this,i),t.settings.mirror?t.scale.x(e.start_timepoint)-t.scale.x(e.start_timepoint+e.duration):t.scale.x(e.start_timepoint+e.duration)-t.scale.x(e.start_timepoint)}.bind(this);return function(o,c){var l=this;r(this,i);var u=a(o,2);u[0];var h=u[1];e=e.data(h,function(t){return r(this,l),t.id}.bind(this)).join(function(i){var e=this;return r(this,l),i.append("g").attr("class",function(t){return r(this,e),"asp-g--bar asp-g--".concat(t.id)}.bind(this)).attr("height",t.scale.y.bandwidth()).attr("y",t.scale.y(t.set.id.size))}.bind(this),function(t){return r(this,l),t}.bind(this),function(i){return r(this,l),i.transition(c).remove().attr("y",t.scale.y(t.set.id.size+1))}.bind(this)).call(function(i){var e=this;r(this,l),i.transition(c).duration(this.settings.duration).attr("transform",function(i){return r(this,e),"translate(".concat(0,",",t.scale.y(i["rank".concat(t.stratum)]),")")}.bind(this)),i.selectAll("rect").data(function(t){return r(this,e),t["states".concat(this.settings.view)]}.bind(this),function(t){return r(this,e),t.sequence}.bind(this)).join("rect").attr("fill",function(t){return r(this,e),this.scale.color(t.state)}.bind(this)).attr("y",0).attr("height",t.scale.y.bandwidth()).attr("rx","4px").attr("ry","4px").call(function(t){var i=this;return r(this,e),t.transition(c).duration(this.settings.duration).attr("x",function(t){return r(this,i),n(t)}.bind(this)).attr("width",function(t){return r(this,i),s(t)}.bind(this))}.bind(this))}.bind(this))}.bind(this)}function T(t){var i=this;return t.xAxisTop=d3.axisTop(t.scale.x).ticks(this.settings.width/160).tickSizeOuter(0).tickSizeInner(-(this.settings.height-this.settings.margin.top-this.settings.margin.bottom)),t.xAxisBottom=d3.axisBottom(t.scale.x).ticks(this.settings.width/160).tickSizeOuter(0).tickSizeInner(0),function(e,n){r(this,i),t.layout.xAxisTop.transition(n).call(t.xAxisTop),t.layout.xAxisBottom.transition(n).call(t.xAxisBottom),t.layout.xAxisTop.selectAll(".tick line").attr("stroke","#999").attr("stroke-opacity",.6),t.layout.xAxisTop.select(".domain").remove(),t.layout.xAxisBottom.select(".domain").remove()}.bind(this)}function q(t){var i=this,e=t.layout.labels.selectAll("text");return function(n,s){var o=this;r(this,i);var c=a(n,2);c[0];var l=c[1];e=e.data(l,function(t){return r(this,o),t.id}.bind(this)).join(function(i){var e=this;return r(this,o),i.append("text").attr("alignment-baseline","middle").attr("transform",function(i){return r(this,e),"translate(".concat(0,",",t.scale.y(i["rank".concat(t.stratum)]),")")}.bind(this)).attr("x",this.settings.margin.left+6).attr("y",t.scale.y.bandwidth()/2+1).text(function(t){return r(this,e),t.id}.bind(this))}.bind(this),function(t){return r(this,o),t}.bind(this),function(i){var e=this;return r(this,o),i.transition(s).remove().attr("transform",function(i){return r(this,e),"translate(".concat(0,",",t.scale.y(t.set.id.size+1),")")}.bind(this))}.bind(this)).call(function(i){var e=this;return r(this,o),i.transition(s).attr("transform",function(i){return r(this,e),"translate(".concat(0,",",t.scale.y(i["rank".concat(t.stratum)]),")")}.bind(this))}.bind(this))}.bind(this)}function I(t){var i=this;return function(e,n){var s=this;r(this,i);var o=a(e,1)[0];n.end().then(function(){r(this,s),t.layout.ticker.text("Day ".concat(o))}.bind(this))}.bind(this)}function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;null===this.settings.stratum_var&&(e=1);var n={stratum:i,i:e};return n.settings={width:Math.floor(this.settings.width*this.settings.splitFactor),margin:s(s({},this.settings.margin),{},{left:e%2==0?this.settings.margin.right:this.settings.margin.left,right:e%2==0?this.settings.margin.left:this.settings.margin.right}),textAnchor:n.i%2==0?"start":"end",sign:n.i%2==0?1:-1,mirror:n.i%2==0},n.settings.xRange=n.i%2==0?[n.settings.width-n.settings.margin.right,n.settings.margin.left]:[n.settings.margin.left,n.settings.width-n.settings.margin.right],n.settings.translateX=n.i%2==0?n.settings.width-n.settings.margin.right:n.settings.margin.left,n.settings.strokeWidth=0===e?n.settings.margin.right:n.settings.margin.left,n.layout=O.call(this,n),n.data=null===t?this.data:M.call(this,t,i),n.set={id:y.call(this,n.data.mutated)},n.scale={x:k.call(this,n.settings.xRange),y:_.call(this,n.set.id)},n.layout.n.text(this.settings.redact_numbers?"N=xx":"N=".concat(n.set.id.size)),n.update={groups:z.call(this,n),bars:P.call(this,n),axis:T.call(this,n),labels:q.call(this,n),ticker:I.call(this,n)},n}function N(t){var i=this;this.settings.timepoint=t,this.data.timepoint=this.data.timepoints.find(function(e){return r(this,i),e[0]===t}.bind(this)),this.plots.forEach(function(e){var n=this;r(this,i),e.data.timepoint=e.data.timepoints.find(function(i){return r(this,n),i[0]===t}.bind(this))}.bind(this)),this.layout.ticker.text("".concat(this.settings.timepointPrefix," ").concat(this.settings.timepointUnit," ").concat(t)),this.controls.range.input.property("value",t),this.controls.range.output.text("".concat(this.settings.timepointPrefix," ").concat(this.settings.timepointUnit," ").concat(t))}function R(){var t=this;this.set=j.call(this),this.scale=S.call(this),this.legend=A.call(this),this.plots=this.settings.stratum_var?d3.groups(this.data.mutated,function(i){return r(this,t),i.stratum}.bind(this)).map(function(i,e){r(this,t);var n=a(i,2),s=n[0],o=n[1];return C.call(this,o,s,e)}.bind(this)):[C.call(this)],V.call(this),this.break=!0,this.delayTimeout=d3.timeout(function(){r(this,t),V.call(this),!1===this.settings.play&&(this.break=!0)}.bind(this),this.settings.delay)}function V(){return B.apply(this,arguments)}function B(){return(B=i(regeneratorRuntime.mark((function t(){var i,e,n,s,o,c,l,h=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=u(this.data.timepoints.filter(function(t){return r(this,h),t[0]>=this.settings.timepoint&&t[0]<=this.settings.timepointMax}.bind(this))),t.prev=1,i.s();case 3:if((e=i.n()).done){t.next=20;break}if(n=e.value,!this.break){t.next=9;break}return this.plots.forEach(function(t){r(this,h),t.layout.svg.interrupt()}.bind(this)),delete this.break,t.abrupt("break",20);case 9:return N.call(this,n[0]),s=this.data.interpolated.flatMap(function(t){return r(this,h),t["states".concat(this.settings.view)]}.bind(this)),o=d3.min(s,function(t){return r(this,h),t.start_timepoint}.bind(this)),c=Math.min(d3.max(s,function(t){return r(this,h),t.start_timepoint+t.duration}.bind(this)),this.settings.timepointMax),this.xDomain=[o,c],l=this.plots.map(function(t){var i=this;return r(this,h),t.data.timepoint=t.data.timepoints.find(function(t){r(this,i);var e=a(t,2),n=e[0];return e[1],n===this.settings.timepoint}.bind(this)),F.call(this,t)}.bind(this)),this.transition=l,t.next=18,Promise.allSettled(l.map(function(t){return r(this,h),t.end()}.bind(this)));case 18:t.next=3;break;case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(1),i.e(t.t0);case 25:return t.prev=25,i.f(),t.finish(25);case 28:case"end":return t.stop()}}),t,this,[[1,22,25,28]])})))).apply(this,arguments)}function F(t){var i=t.layout.svg.transition().duration(this.settings.duration).ease(d3.easeLinear);return t.scale.x.domain(this.xDomain),t.update.groups(t.data.timepoint,i),t.update.bars(t.data.timepoint,i),t.update.axis(t.data.timepoint,i),this.settings.displayIds&&t.update.labels(t.data.timepoint,i),i}!function(t){var i={exports:{}};t(i,i.exports)}((function(t){var i=function(t){var i,e=Object.prototype,n=e.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},r=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",o=s.toStringTag||"@@toStringTag";function c(t,i,e){return Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[i]}try{c({},"")}catch(t){c=function(t,i,e){return t[i]=e}}function l(t,i,e,n){var s=i&&i.prototype instanceof m?i:m,r=Object.create(s.prototype),a=new O(n||[]);return r._invoke=function(t,i,e){var n=h;return function(s,r){if(n===f)throw new Error("Generator is already running");if(n===p){if("throw"===s)throw r;return L()}for(e.method=s,e.arg=r;;){var a=e.delegate;if(a){var o=E(a,e);if(o){if(o===g)continue;return o}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===h)throw n=p,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=f;var c=u(t,i,e);if("normal"===c.type){if(n=e.done?p:d,c.arg===g)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(n=p,e.method="throw",e.arg=c.arg)}}}(t,e,a),r}function u(t,i,e){try{return{type:"normal",arg:t.call(i,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h="suspendedStart",d="suspendedYield",f="executing",p="completed",g={};function m(){}function v(){}function b(){}var y={};y[r]=function(){return this};var x=Object.getPrototypeOf,w=x&&x(x(M([])));w&&w!==e&&n.call(w,r)&&(y=w);var j=b.prototype=m.prototype=Object.create(y);function k(t){["next","throw","return"].forEach((function(i){c(t,i,(function(t){return this._invoke(i,t)}))}))}function _(t,i){function e(s,r,a,o){var c=u(t[s],t,r);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?i.resolve(h.__await).then((function(t){e("next",t,a,o)}),(function(t){e("throw",t,a,o)})):i.resolve(h).then((function(t){l.value=t,a(l)}),(function(t){return e("throw",t,a,o)}))}o(c.arg)}var s;this._invoke=function(t,n){function r(){return new i((function(i,s){e(t,n,i,s)}))}return s=s?s.then(r,r):r()}}function E(t,e){var n=t.iterator[e.method];if(n===i){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=i,E(t,e),"throw"===e.method))return g;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var s=u(n,t.iterator,e.arg);if("throw"===s.type)return e.method="throw",e.arg=s.arg,e.delegate=null,g;var r=s.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=i),e.delegate=null,g):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function S(t){var i={tryLoc:t[0]};1 in t&&(i.catchLoc=t[1]),2 in t&&(i.finallyLoc=t[2],i.afterLoc=t[3]),this.tryEntries.push(i)}function A(t){var i=t.completion||{};i.type="normal",delete i.arg,t.completion=i}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function M(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var s=-1,a=function e(){for(;++s<t.length;)if(n.call(t,s))return e.value=t[s],e.done=!1,e;return e.value=i,e.done=!0,e};return a.next=a}}return{next:L}}function L(){return{value:i,done:!0}}return v.prototype=j.constructor=b,b.constructor=v,v.displayName=c(b,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var i="function"==typeof t&&t.constructor;return!!i&&(i===v||"GeneratorFunction"===(i.displayName||i.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,o,"GeneratorFunction")),t.prototype=Object.create(j),t},t.awrap=function(t){return{__await:t}},k(_.prototype),_.prototype[a]=function(){return this},t.AsyncIterator=_,t.async=function(i,e,n,s,r){void 0===r&&(r=Promise);var a=new _(l(i,e,n,s),r);return t.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(j),c(j,o,"Generator"),j[r]=function(){return this},j.toString=function(){return"[object Generator]"},t.keys=function(t){var i=[];for(var e in t)i.push(e);return i.reverse(),function e(){for(;i.length;){var n=i.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=M,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(A),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=i)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function s(n,s){return o.type="throw",o.arg=t,e.next=n,s&&(e.method="next",e.arg=i),!!s}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return s("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return s(a.catchLoc,!0);if(this.prev<a.finallyLoc)return s(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return s(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return s(a.finallyLoc)}}}},abrupt:function(t,i){for(var e=this.tryEntries.length-1;e>=0;--e){var s=this.tryEntries[e];if(s.tryLoc<=this.prev&&n.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var r=s;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=i&&i<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=t,a.arg=i,r?(this.method="next",this.next=r.finallyLoc,g):this.complete(a)},complete:function(t,i){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&i&&(this.next=i),g},finish:function(t){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),A(e),g}},catch:function(t){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var s=n.arg;A(e)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:M(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=i),g}},t}(t.exports);try{regeneratorRuntime=i}catch(t){Function("r","regeneratorRuntime = r")(i)}}));var D={playPause:function(t){var i=this,e=this.util.addElement("button",t,"button").attr("type","button").attr("title",this.settings.play?"Pause animation":"Play animation");return this.util.addIcon.call(this,e,(this.settings.play?f:p).icon),e.on("click",function(){r(this,i),b.call(this),!1===this.settings.play&&void 0===this.break?this.break=!0:(delete this.break,V.call(this))}.bind(this)),e},stepBackward:function(t){var i=this,e=this.util.addElement("button",t,"button").attr("type","button").attr("title","Step backward one timepoint");return this.util.addIcon.call(this,e,m),e.on("click",function(){var t=this;r(this,i),this.break=!0,this.settings.play&&b.call(this),d3.timeout(function(){var i=this;r(this,t),N.call(this,this.settings.timepoint-1),this.plots.forEach(function(t){r(this,i),F.call(this,t)}.bind(this))}.bind(this),this.settings.duration)}.bind(this)),e},stepForward:function(t){var i=this,e=this.util.addElement("button",t,"button").attr("type","button").attr("title","Step forward one timepoint");return this.util.addIcon.call(this,e,v),e.on("click",function(){var t=this;r(this,i),this.break=!0,this.settings.play&&b.call(this),d3.timeout(function(){var i=this;r(this,t),N.call(this,this.settings.timepoint+1),this.plots.forEach(function(t){r(this,i),F.call(this,t)}.bind(this))}.bind(this),this.settings.duration)}.bind(this)),e},reset:function(t){var i=this,e=this.util.addElement("button",t,"button").attr("type","button").attr("title","Restart animation");return this.util.addIcon.call(this,e,g),e.on("click",function(){var t=this;r(this,i),console.log("reset"),this.break=!0,d3.timeout(function(){var i=this;r(this,t),N.call(this,this.settings.timepointMin),this.plots.forEach(function(t){r(this,i),F.call(this,t)}.bind(this)),this.settings.play&&V.call(this)}.bind(this),this.settings.duration)}.bind(this)),e},range:function(t){var i=this,e=this.util.addElement("label",t,"label"),n=this.util.addElement("output",e,"output"),s=this.util.addElement("input",e,"input").attr("type","range").attr("step",1);return s.on("mousedown",(function(){i.break=!0,i.settings.play&&b.call(i)})),s.on("change",(function(){var t=this;console.log(this.value),i.break=!0,i.settings.play&&b.call(i),N.call(i,+this.value),i.plots.forEach(function(e){r(this,t),F.call(i,e)}.bind(this))})),{input:s,output:n}}};function U(t){var i=this.util.addElement("player",t),e=this.util.addElement("player__form",i,"form"),n={};for(var s in D)n[s]=D[s].call(this,e);return n}function G(){return[{setting:"OverallSurvival",value:"overall-survival",label:"Overall Survival"},{setting:"CurrentResponse",value:"current-response",label:"Current Response"}]}function W(t){var i=this,e=this.util.addElement("view",t),n=this.util.addElement("view__form",e,"form");n.append("span").text("View");var s=this.util.addElement("div",n).selectAll("input").data(G).join("input").attr("type","radio").attr("name","view").attr("value",function(t){return r(this,i),t.value}.bind(this)).property("checked",function(t){return r(this,i),t.setting===this.settings.view}.bind(this)).each((function(t){var i=document.createElement("label");i.textContent=t.label,this.parentNode.insertBefore(i,this)}));return s.on("change",function(){var t=this;r(this,i);var e=n.selectAll("input:checked").datum();console.log("view: ".concat(e.setting)),this.settings.view=e.setting;var s=this.data.interpolated.flatMap(function(i){return r(this,t),i["states".concat(this.settings.view)]}.bind(this)),o=d3.min(s,function(i){return r(this,t),i.start_timepoint}.bind(this)),c=d3.max(s,function(i){return r(this,t),i.start_timepoint+i.duration}.bind(this));this.xDomain=[o,c],this.plots.forEach(function(i){var e=this;r(this,t),i.data.timepoints.forEach(function(t){var n=this;r(this,e);var s=a(t,2);s[0];var o=s[1];o.sort(function(t,i){return r(this,n),t["rank".concat(this.settings.view)]-i["rank".concat(this.settings.view)]}.bind(this)),o.forEach(function(t,e){r(this,n),t["rank".concat(i.stratum)]=e}.bind(this))}.bind(this))}.bind(this)),!1===this.settings.play&&this.plots.forEach(function(i){r(this,t),F.call(this,i)}.bind(this))}.bind(this)),s}function X(t){var i=this.util.addElement("controls",t);return{controls:i,view:W.call(this,i),player:U.call(this,i)}}function Y(){var t=this;this.settings.dimensions=d.call(this,this.layout.main),this.settings.width=this.settings.dimensions.width,this.settings.height=this.settings.dimensions.height,this.plots.forEach(function(i){var e=this;r(this,t),i.settings.width=Math.floor(this.settings.width*this.settings.splitFactor),i.settings.xRange=i.i%2==0?[i.settings.width-i.settings.margin.right,i.settings.margin.left]:[i.settings.margin.left,i.settings.width-i.settings.margin.right],i.settings.translateX=i.i%2==0?i.settings.width-i.settings.margin.right:i.settings.margin.left,i.layout.svg.attr("width",i.settings.width).attr("height",this.settings.height),i.layout.title.attr("transform",function(t){return r(this,e),"translate(".concat(i.settings.margin.left+(i.settings.width-i.settings.margin.right-i.settings.margin.left)/2,",").concat(i.settings.margin.top/2,")")}.bind(this)),i.layout.xAxisTop.call(function(t){return r(this,e),t.select(".asp-x-axis__label").attr("x",i.settings.mirror?i.settings.width-i.settings.margin.right-18:i.settings.margin.left+18)}.bind(this)),i.layout.xAxisBottom.call(function(t){return r(this,e),t.select(".asp-x-axis__label").attr("x",i.settings.mirror?i.settings.width-i.settings.margin.right-18:i.settings.margin.left+18)}.bind(this)),i.scale.x.range(i.settings.xRange),i.xAxisTop=d3.axisTop(i.scale.x).ticks(this.settings.width/160).tickSizeOuter(0).tickSizeInner(-(this.settings.height-this.settings.margin.top-this.settings.margin.bottom)),i.xAxisBottom=d3.axisBottom(i.scale.x).ticks(this.settings.width/160).tickSizeOuter(0).tickSizeInner(0),i.scale.y.range([this.settings.height-this.settings.margin.bottom,this.settings.margin.top])}.bind(this))}function $(){var t=this.util.addElement("main",d3.select(this.element)),i=d.call(this,t);this.settings.width=i.width,this.settings.height=i.height;var e=this.util.addElement("legend",t),n=this.util.addElement("plots",t),r=this.util.addElement("ticker",n),a=X.call(this,t);return window.addEventListener("resize",Y.bind(this)),s({main:t,legend:e,plots:n,ticker:r},a)}function H(t){var i,e=this,n={},s=u(Object.keys(this.settings).filter(function(t){return r(this,e),/_var$/.test(t)}.bind(this)));try{for(s.s();!(i=s.n()).done;){var a=i.value,o=a.replace(/_var$/,"");n[o]=["timepoint","duration","censor_timepoint","result_order","visit_order"].includes(o)?+t[this.settings[a]]:t[this.settings[a]]}}catch(t){s.e(t)}finally{s.f()}return n}function J(t){if(void 0!==t[this.settings.result_order_var])t.result_order=t[this.settings.result_order_var];else switch(t.result.toLowerCase()){case"cr":case"complete response":case"complete response (cr)":t.result_order=0;break;case"pr":case"partial response":case"partial response (pr)":t.result_order=1;break;case"sd":case"stable disease":case"stable disease (sd)":case"non-pd":case"non-progressive disease":t.result_order=2;break;case"non-cr/non-pd":case"non-complete reponse/non-progressive disease":t.result_order=3;break;case"ne":case"not evaluated":case"not evaluated (ne)":case"not all evaluated":case"not all evaluated (ne)":t.result_order=4;break;case"un":case"unknown":case"unknown (un)":case"undefined":case"undefined (un)":t.result_order=5;break;case"pdu":case"unconfirmed progressive disease":t.result_order=6;break;case"pd":case"progressive disease":case"progressive disease (pd)":case"pdc":case"confirmed progressive disease":t.result_order=7;break;default:t.result_order=-1}if(void 0!==t[this.settings.result_color_var])t.result_color=t[this.settings.result_color_var];else switch(t.result.toLowerCase()){case"cr":case"complete response":case"complete response (cr)":t.result_color="#2166ac";break;case"pr":case"partial response":case"partial response (pr)":t.result_color="#4393c3";break;case"sd":case"stable disease":case"stable disease (sd)":case"non-pd":case"non-progressive disease":t.result_color="#92c5de";break;case"non-cr/non-pd":case"non-complete reponse/non-progressive disease":t.result_color="#7c637d";break;case"ne":case"not evaluated":case"not evaluated (ne)":case"not all evaluated":case"not all evaluated (ne)":t.result_color="#bbbbbb";break;case"un":case"unknown":case"unknown (un)":case"undefined":case"undefined (un)":t.result_color="#888888";break;case"pdu":case"unconfirmed progressive disease":t.result_color="#f4a582";break;case"pd":case"progressive disease":case"progressive disease (pd)":case"pdc":case"confirmed progressive disease":t.result_color="#d6604d";break;default:t.result_color="#000000"}}function K(t){t.week=t.timepoint/7,t.month=t.timepoint/30.4375,t.year=t.timepoint/365.25}function Q(t){var i=this,e=t.map(function(t){r(this,i);var e=H.call(this,t);return J.call(this,e),K.call(this,e),e}.bind(this));return function(t){var i=this;d3.rollup(t,function(t){var e=this;r(this,i),t.sort(function(t,i){return r(this,e),t.timepoint-i.timepoint}.bind(this)),d3.pairs(t).forEach(function(t,i,n){r(this,e),isNaN(t[0].duration)&&(t[0].duration=t[1].timepoint-t[0].timepoint)}.bind(this));var n=t[t.length-1];isNaN(n.duration)&&(n.duration=void 0!==n.censor_timepoint&&n.censor_timepoint>n.timepoint?n.censor_timepoint-n.timepoint:1)}.bind(this),function(t){return r(this,i),t.id}.bind(this))}(e),e}function Z(t){var i=this,e=0;return t.map(function(t){return r(this,i),s({},t)}.bind(this)).reverse().map(function(t,n,s){return r(this,i),0===n?t.start_timepoint=1:(t.duration=t.duration,e-=t.duration,t.start_timepoint=e),t}.bind(this))}function tt(t){var i=this;return o(d3.rollup(t,function(t){var e=this;r(this,i);var n,a,o=[],c=[],l=d3.min(t,function(t){return r(this,e),t.timepoint}.bind(this)),u=0;return t.sort(function(t,i){return r(this,e),t.timepoint-i.timepoint}.bind(this)).forEach(function(i,h){var d=this;r(this,e),0!==h&&i.result===t[h-1].result||(n=i.result,a=0,c.push({state:n,start_timepoint:l,duration:0,sequence:u}),u++);for(var f=0;f<i.duration;f++){var p=s({},i);p.timepoint=p.timepoint+f,p.duration=a+f+1,p.total_duration=l+f+1,c[c.length-1].duration++,p.statesOverallSurvival=c.map(function(t){return r(this,d),s({},t)}.bind(this)),p.statesCurrentResponse=Z(p.statesOverallSurvival),p.state=p.result,p.state_order=p.result_order,o.push(p)}a+=i.duration,l+=i.duration}.bind(this)),o}.bind(this),function(t){return r(this,i),t.id}.bind(this)).values()).flatMap(function(t){return r(this,i),t}.bind(this))}function it(t){var i=this;t.sort(function(t,e){r(this,i);var n=t.state_order-e.state_order,s=e.total_duration-t.total_duration,a=e.duration-t.duration,o=t.id<e.id?-1:1;return n||s||a||o}.bind(this)).forEach(function(t,e){r(this,i),t.rankOverallSurvival=e}.bind(this))}function et(t){var i=this;t.sort(function(t,e){r(this,i);var n=t.state_order-e.state_order,s=e.duration-t.duration,a=t.total_duration-e.total_duration,o=t.id<e.id?-1:1;return n||s||a||o}.bind(this)).forEach(function(t,e){r(this,i),t.rankCurrentResponse=e}.bind(this))}function nt(t){var i=this;t.sort(function(t,e){return r(this,i),t["rank".concat(this.settings.view)]-e["rank".concat(this.settings.view)]}.bind(this)).forEach(function(t,e){r(this,i),t.rank=e}.bind(this))}function st(t,i){var e=this;return d3.rollups(t,function(t){var n=this;r(this,e);var o=new Set(t.map(function(t){return r(this,n),t.id}.bind(this)));return i.forEach(function(i){r(this,n);var e=a(i,2),c=e[0],l=e[1];!1===o.has(c)&&t.push(s({},l))}.bind(this)),it.call(this,t),et.call(this,t),nt.call(this,t),t}.bind(this),function(t){return r(this,e),t.timepoint}.bind(this))}function rt(t){var i=this,e=Q.call(this,t),n=tt.call(this,e),s=d3.rollups(n,function(t){return r(this,i),t[t.length-1]}.bind(this),function(t){return r(this,i),t.id}.bind(this));return{data:t,mutated:e,interpolated:n,finalTimepoint:s,timepoints:st.call(this,n,s)}}function at(){var t=this,i=s(s({container:this.layout.controls,player:this.layout.player},this.layout.player),{},{view:this.layout.view});return this.settings.timepointMin=null!==this.settings.timepointMin?this.settings.timepointMin:d3.min(this.data.timepoints,function(i){return r(this,t),a(i,1)[0]}.bind(this)),this.settings.timepointMax=null!==this.settings.timepointMax?this.settings.timepointMax:d3.max(this.data.timepoints,function(i){return r(this,t),a(i,1)[0]}.bind(this)),this.settings.timepoint=null!==this.settings.timepoint&&this.settings.timepoint>=this.settings.timepointMin&&this.settings.timepoint<=this.settings.timepointMax?this.settings.timepoint:this.settings.timepointMin,i.range.input.attr("min",this.settings.timepointMin).attr("max",this.settings.timepointMax).attr("value",this.settings.timepoint),i.range.output.text("".concat(this.settings.timepointUnit," ").concat(this.settings.timepoint)),i}return function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={element:i,settings:Object.assign({id_var:"USUBJID",timepoint_var:"ADY",duration_var:"ADUR",censor_var:"CNSR",censor_timepoint_var:"CNSRDY",result_var:"AVALC",result_order_var:"AVAL",result_color_var:"ACOLOR",visit_var:"AVISIT",visit_order_var:"AVISITN",stratum_var:null,view:"OverallSurvival",sort:"CurrentResponse",split:"vertical",splitFactor:1,play:!0,timepoint:null,timepointUnit:"day",timepointPrefix:"Study",timepointMin:null,timepointMax:null,duration:250,delay:5e3,speedFactor:50,dimensions:{width:null,height:null},margin:{top:60,right:10,bottom:50,left:125},padding:.1,buttonSize:25,barSize:null,displayIds:!1,criteria:"Response",redact_numbers:!1,shuffle:!0,update:function(){return this.stratum_var&&(this.split="horizontal",this.splitFactor=.5),this}},e).update(),util:h};return n.layout=$.call(n),n.data=rt.call(n,t),n.controls=at.call(n),R.call(n),n}}));
